<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Clicker Game with Progressive Shop</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      #resources {
        margin-bottom: 20px;
      }
      #shop {
        position: fixed;
        right: 20px;
        top: 20px;
        width: 260px;
        padding: 15px;
        border: 2px solid #333;
        border-radius: 10px;
        background: #f9f9f9;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
      }
      #shop h2 {
        margin-top: 0;
      }
      button {
        display: block;
        margin: 6px 0;
        padding: 8px;
        width: 100%;
        border-radius: 6px;
        border: 1px solid #333;
        background: #eee;
        cursor: pointer;
      }
      button:disabled {
        background-color: #888;
        color: #ccc;
        cursor: not-allowed;
      }
      .placeholder {
        background: #ddd;
        color: #777;
        font-style: italic;
      }
    </style>
  </head>
  <body>
    <h1>Clicker Game</h1>

    <div id="resources">
      <p id="woodDisplay">Wood: 0</p>
      <p id="stoneDisplay">Stone: 0</p>
    </div>

    <button id="woodBtn">Chop Wood</button>
    <button id="stoneBtn" style="display:none;">Mine Stone</button>

    <div id="shop">
      <h2>Shop</h2>
      <div id="shopUpgrades"></div>
    </div>

    <script>
      let wood = 0;
      let stone = 0;
      let clickPowerWood = 1;
      let clickPowerStone = 1;
      let stoneUnlocked = false;

      const woodDisplay = document.getElementById("woodDisplay");
      const stoneDisplay = document.getElementById("stoneDisplay");
      const woodBtn = document.getElementById("woodBtn");
      const stoneBtn = document.getElementById("stoneBtn");
      const shopDiv = document.getElementById("shopUpgrades");

      // Define upgrades in order
      let upgrades = [
        { name: "Pickaxe", cost: { wood: 1000 }, effect: () => { stoneUnlocked = true; stoneBtn.style.display = "inline-block"; }, purchased: false, visible: false },
        { name: "Stone Axe", cost: { stone: 500 }, effect: () => { clickPowerWood += 2; }, purchased: false, visible: false },
        { name: "Better Tools", cost: { wood: 2000, stone: 1000 }, effect: () => { clickPowerWood += 5; clickPowerStone += 5; }, purchased: false, visible: false },
        { name: "Advanced Tools", cost: { wood: 5000, stone: 2500 }, effect: () => { clickPowerWood += 10; clickPowerStone += 10; }, purchased: false, visible: false },
        { name: "Master Tools", cost: { wood: 10000, stone: 5000 }, effect: () => { clickPowerWood += 20; clickPowerStone += 20; }, purchased: false, visible: false },
        { name: "Factories", cost: { wood: 20000, stone: 15000 }, effect: () => { setInterval(() => { wood += 50; stone += 50; updateResources(); }, 1000); }, purchased: false, visible: false },
      ];

      // Clicking resources
      woodBtn.addEventListener("click", () => {
        wood += clickPowerWood;
        updateResources();
      });

      stoneBtn.addEventListener("click", () => {
        stone += clickPowerStone;
        updateResources();
      });

      // Update resource display
      function updateResources() {
        woodDisplay.textContent = "Wood: " + wood;
        stoneDisplay.textContent = "Stone: " + stone;
        renderShop();
      }

      // Render shop with progression system
      function renderShop() {
        shopDiv.innerHTML = "";
        let firstHiddenShown = false;

        upgrades.forEach((upg, index) => {
          if (upg.purchased) {
            let btn = document.createElement("button");
            btn.textContent = upg.name + " (Purchased)";
            btn.disabled = true;
            shopDiv.appendChild(btn);
          } else if (upg.visible) {
            let affordable = (upg.cost.wood || 0) <= wood && (upg.cost.stone || 0) <= stone;
            let btn = document.createElement("button");
            btn.textContent = `${upg.name} (Cost: ${upg.cost.wood || 0} wood, ${upg.cost.stone || 0} stone)`;
            btn.disabled = !affordable;
            btn.addEventListener("click", () => purchaseUpgrade(upg));
            shopDiv.appendChild(btn);
          } else if (!firstHiddenShown) {
            // Show only the next hidden upgrade as a placeholder
            let btn = document.createElement("button");
            btn.textContent = "??? (Locked)";
            btn.disabled = true;
            btn.classList.add("placeholder");
            shopDiv.appendChild(btn);
            firstHiddenShown = true;
          }
        });
      }

      // Purchase upgrade
      function purchaseUpgrade(upg) {
        if (wood >= (upg.cost.wood || 0) && stone >= (upg.cost.stone || 0)) {
          wood -= (upg.cost.wood || 0);
          stone -= (upg.cost.stone || 0);
          upg.effect();
          upg.purchased = true;

          // Unlock next upgrade in the chain
          let nextIndex = upgrades.indexOf(upg) + 1;
          if (nextIndex < upgrades.length) {
            upgrades[nextIndex].visible = true;
          }

          updateResources();
        }
      }

      // Start game
      upgrades[0].visible = true; // first upgrade available
      updateResources();
    </script>
  </body>
</html>
